### Lean4 Proof
```lean4
theorem squares_and_cubes_mod7 : ∀ n : ℤ, (∃ k : ℤ, n = k^2) ∧ (∃ m : ℤ, n = m^3) → n % 7 = 0 ∨ n % 7 = 1 := by
  intro n h
  have h₁ : n % 7 = 0 ∨ n % 7 = 1 := by
    rcases h with ⟨⟨k, hk⟩, ⟨m, hm⟩⟩
    have h₂ : k^2 % 7 = 0 ∨ k^2 % 7 = 1 ∨ k^2 % 7 = 2 ∨ k^2 % 7 = 4 := by
      have : k % 7 = 0 ∨ k % 7 = 1 ∨ k % 7 = 2 ∨ k % 7 = 3 ∨ k % 7 = 4 ∨ k % 7 = 5 ∨ k % 7 = 6 := by omega
      rcases this with (h₃ | h₃ | h₃ | h₃ | h₃ | h₃ | h₃) <;> simp [h₃, pow_two, Int.mul_emod, Int.add_emod]
    have h₃ : m^3 % 7 = 0 ∨ m^3 % 7 = 1 ∨ m^3 % 7 = 6 := by
      have : m % 7 = 0 ∨ m % 7 = 1 ∨ m % 7 = 2 ∨ m % 7 = 3 ∨ m % 7 = 4 ∨ m % 7 = 5 ∨ m % 7 = 6 := by omega
      rcases this with (h₄ | h₄ | h₄ | h₄ | h₄ | h₄ | h₄) <;> simp [h₄, pow_three, Int.mul_emod, Int.add_emod]
    rcases h₂ with (h₂ | h₂ | h₂ | h₂) <;> rcases h₃ with (h₃ | h₃ | h₃) <;> simp [hk, hm, h₂, h₃, Int.emod_emod] at * <;> omega
  exact h₁
```